
import React, { useState, useCallback } from 'react';

export const useChefAgenceData = (toast) => {
  const [chefsAgence, setChefsAgence] = useState([]);
  const [agences, setAgences] = useState([]);

  const loadData = useCallback(() => {
    try {
      const storedChefs = JSON.parse(localStorage.getItem('pmuChefsAgence')) || [];
      setChefsAgence(storedChefs);
      const storedAgences = JSON.parse(localStorage.getItem('pmuAgences')) || [];
      setAgences(storedAgences);
    } catch (error) {
      toast({ title: "Erreur de chargement", description: "Impossible de charger les données depuis le stockage local.", variant: "destructive" });
      setChefsAgence([]);
      setAgences([]);
    }
  }, [toast]);

  const saveData = useCallback((data) => {
    try {
      localStorage.setItem('pmuChefsAgence', JSON.stringify(data));
      setChefsAgence(data);
    } catch (error) {
      toast({ title: "Erreur d'enregistrement", description: "Impossible d'enregistrer les données dans le stockage local.", variant: "destructive" });
    }
  }, [toast]);

  return { chefsAgence, agences, loadData, saveData };
};
